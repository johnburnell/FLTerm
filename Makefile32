HEADERS = Fl_Term.h ssh_Host.h
LIBS =  /mingw32/lib/libssh2.a /mingw32/lib/libz.a /mingw32/lib/libssl.a /mingw32/lib/libcrypto.a

CFLAGS = -Os $(shell fltk-config --cxxflags)
LDFLAGS = -s $(shell fltk-config --ldstaticflags) -lws2_32 -static-libgcc -static-libstdc++ -Wl,-Bstatic -lstdc++ -lpthread
RC = windres

all: flTerm32.exe

flTerm32.exe: obj/flTerm32.o obj/Fl_Term32.o obj/ssh_Host32.o obj/resource32.o
	cc -Wall -o "$@" obj/flTerm32.o obj/Fl_Term32.o obj/ssh_Host32.o obj/resource32.o ${LIBS} ${LDFLAGS}

obj/%32.o: ./src/%.cxx ${HEADERS}
	${CC} ${CFLAGS} ${INCLUDE_DIRS} -c $< -o $@

obj/resource32.o: res\fltk.rc res\fltk.manifest res\Fl.ico 
	${RC} -I. -I.\res -i $< -o $@

clean:
	rm obj/*32.o "flTerm32.exe"
